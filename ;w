import { fetchAllImageURLs } from "../data.ts";
import type { Council } from "../data.ts";

import { notifyError } from "@utils/showNotif.ts";

export default async function imageList(): Promise<string | null> {
  try {
    const imageRef: Omit<Council, "image">[] | null = await fetchAllImageURLs();

    if (!imageRef) throw new Error("No image URLs found");

    if (imageRef.length === 0) {
      return "<h4 class='muted-2'>Empty council images...</h4>";
    }

    const html = imageRef
      .map(
        (ref) => `div class="council-image-item" data-id="${ref.id}">
        img src="${ref.url}" class="council-image" />
</div>`,
      )
      .join("");

    return html;
  } catch (error) {
    console.error("Error in loadSlideshows:", error);
    notifyError("Failed to load council images. Please try again later.");
    return null;
  }
}
